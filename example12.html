<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
        dmuka.LocalStorageDB - Muhammet Kandemir
    </title>
    <link rel="stylesheet" type="text/css" href="example.css">
</head>

<body>
    <h1>
        Welcome dmuka.LocalStorageDB Documentation
    </h1>

    <textarea id="query" onkeydown="if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}">
db.users
  .leftJoin(
      db.user_addresses,
      (user, address) => user.user_id === address.user_id,
      function (user, address) { 
          return {
              name_and_surname : user.name + " " + user.surname,
              address : address.address
          };
      }
  )
  .groupBy(o => o.name_and_surname)
  .select(function(o) {
      return {
          name_and_surname : o.key,
          addresses: o.value.iQueryable().select(address => address.address).where(address => address !== undefined).toArray()
      };
  })
  .toArray()
    </textarea>
    <button id="execute">Execute</button>

    <pre id="json-result"></pre>

    <script src="Libraries/dmuka.LocalStorageDB/main.js"></script>
    <script src="exampleDB.js"></script>
    <script>
        function execute() {
            document.querySelector("#json-result").innerHTML = JSON.stringify(new Function("return " + document.querySelector("#query").value + ";")(), null, 4);
        }
        document.querySelector("#execute").addEventListener("click", execute);
        execute();
    </script>
</body>

</html>